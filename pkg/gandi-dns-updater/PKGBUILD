pkgname=gandi-dns-updater
pkgver=2.1.0
pkgrel=1
pkgdesc="CLI utility for updating Gandi.net DNS records"
arch=('any')
url="https://github.com/hmlendea/${pkgname}"
license=('GPL')
depends=('curl')
optdepends=('bind: For IP address detection'
            'iputils: For IP address detection')
install=
source=(https://github.com/hmlendea/${pkgname}/releases/download/v${pkgver}/${pkgname}.sh)
sha512sums=('63c1c6db24c9f71a89ce88d9b66a471ab5f343cefe8e3ac1287254fbf067aceba916fa317b63c787f0199e173e77fc03bcc868385d892d836905946fd4fb1f9f')

package() {
	install -d "${pkgdir}/etc/${pkgname}"
	install -d "${pkgdir}/usr/bin"
	install -d "${pkgdir}/usr/lib/systemd/system"

	install -m755 "${srcdir}/${pkgname}.sh" "${pkgdir}/usr/bin/${pkgname}"
	install "${srcdir}/../${pkgname}@.service" "${pkgdir}/usr/lib/systemd/system/${pkgname}@.service"
	install "${srcdir}/../${pkgname}@.timer" "${pkgdir}/usr/lib/systemd/system/${pkgname}@.timer"
	touch "${pkgdir}/etc/${pkgname}/api-key"
}
